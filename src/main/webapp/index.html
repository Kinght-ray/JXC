<!doctype html>

<html>
<head>    
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>超市进销存管理系统</title>
    <!--<link rel="stylesheet" type="text/css" href="static/easyUI-Mini/WebContent/demo/demo.css">-->
    <link rel="stylesheet" href="static/easyUI-Mini/WebContent/res/third-party/scrollbar/jquery.mCustomScrollbar.css">
    <link rel="stylesheet" href="static/easyUI-Mini/WebContent/frame/frame1/res/frame.css">
    <link rel="stylesheet" href="static/easyUI-Mini/WebContent/frame/frame1/res/index.css">
    <!--<link rel="stylesheet" href="static/easyUI-Mini/WebContent/frame/frame1/res/tabs.css">-->
    <link rel="stylesheet" href="static/easyUI-Mini/WebContent/frame/frame1/res/menu/menu.css">
    <script src="static/easyUI-Mini/WebContent/frame/frame1/res/menu/menu.js"></script>
    <script src="static/easyUI-Mini/WebContent/frame/frame1/res/menutip.js"></script>
    <script src="static/easyUI-Mini/WebContent/scripts/boot.js" type="text/javascript"></script>
    <script src="static/easyUI-Mini/WebContent/res/third-party/scrollbar/jquery.mCustomScrollbar.concat.min.js"></script>
    <script src="static/easyUI-Mini/WebContent/scripts/miniui/locale/zh_CN.js"></script>
    <script src="static/easyUI-Mini/WebContent/demo/datagrid/js/ColumnsMenu.js"></script>

    <!--<script type="text/javascript" src="/static/jquery-easyui-1.7.0/jquery.easyui.min.js"></script>-->

</head>
<body>
    
<div class="navbar">
    <div class="navbar-header">
        <div class="navbar-brand">超市进销存管理系统</div>
        <div class="navbar-brand navbar-brand-compact">超</div>
    </div>
    <ul class="nav navbar-nav">
        <li><a id="toggle"><span class="fa fa-bars" ></span></a></li><!--缩小按钮-->
        <li id="userInfo" class="userInfo" i style="padding-top: 16px"></li><!--加载用户身份信息-->
    </ul>
    <ul class="nav navbar-nav navbar-right">
        <li><a href="updatepass.html"><i class="mini-window"></i> 修改密码</a></li>
        <li class="dropdown">
        <li><a href="/admin/user/logout"><i class="fa fa-sign-out"></i> 退出登录</a></li>
        </li>
    </ul>
</div>


<div class="container">
    <div class="sidebar">
        <div class="sidebar-toggle"><i class = "fa fa-map-signs" ></i>导航栏</div>
        <div id="mainMenu"></div>
    </div>


    <div class="main">
        <!--Tabs-->
        <div id="mainTabs" class="mini-tabs bg-toolbar" activeIndex="0" style="width:100%;height:96%;"
             bodyStyle="border:0;background:white;"
        >
            <div title="首页" url="../../common/stockSearch.html">
            </div>
        </div>

        <div align="center" style="height: 35px;padding: 5px;background-color: #3c8dbc;color: #fdfffb"   >
            Copyright ©  ray 版权所有
        </div>

    </div>



   
</div>



<div id="contextMenu" class="mini-butt">
    <div id="mm-tabrefresh" data-options="name:1,iconCls:'icon-refresh'"> 刷新当前标签页</div>
    <div class="menu-sep"></div>
    <div id="mm-tabclose" data-options="name:2,iconCls:'icon-closetab'">关闭当前标签页</div>
    <div id="mm-tabcloseall" data-options="name:3,iconCls:'icon-closealltab'">关闭全部标签页</div>
    <div id="mm-tabcloseother" data-options="name:4,iconCls:'icon-closeothertab'">关闭其他标签页</div>
    <div id="mm-tabcloseright" data-options="name:5,iconCls:'icon-closerighttab'">关闭右侧标签页</div>
    <div id="mm-tabcloseleft" data-options="name:6,iconCls:'icon-closelefttab'">关闭左侧标签页</div>
</div>


<script type="text/javascript">


    function activeTab(item) {
        var tabs = mini.get("mainTabs");
        var tab = tabs.getTab(item.id);
        if (!tab) {
            tab = { name: item.id, title: item.text, url: item.url, iconCls: item.iconCls, showCloseButton: true };
            tab = tabs.addTab(tab);
        }
        tabs.activeTab(tab);

    }



    $(function () {



    //
    // function logout() {
    //     $.messager.confirm("系统提示", "您确定要退出系统吗？", function (r) {
    //         if ("#logout") {
    //             window.location.href = '/admin/user/logout';
    //         }
    //     });
    // }

        function openTab(node) {
            if ($("#tabs").tabs("exists", node.text)) {
                $("#tabs").tabs("select", node.text);
            } else {
                var content = "<iframe frameborder=0 scrolling='auto' style='width:100%;height:99%' src='" + node.attributes.url + "'></iframe>";
                $("#tabs").tabs("add", {
                    title: node.text,
                    iconCls: node.iconCls,
                    closable: true,
                    content: content
                });
            }
        }



        <!--首页-->
        function showTab(node) {
            var tabs = mini.get("mainTabs");
            var id = "tab$" + node.id;
            var tab = tabs.getTab(id);
            if (!tab) {
                tab = {};
                tab.name = id;
                tab.title = node.text;
                tab.showCloseButton = true;
                tab.url = node.url;
                tabs.addTab(tab);
            }
            tabs.activeTab(tab);
        }
        function onItemClick(e) {
            var item = e.item;
            var isLeaf = e.isLeaf;
            if (isLeaf) {
                showTab(item);
            }
        }



        //menu
        var menu = new Menu("#mainMenu", {
            itemclick: function (item) {
                if (!item.children) {
                    activeTab(item);
                }
            }
        });

        $("#userInfo").load("/user/loadUserInfo"); // 加载用户信息

        $(".sidebar").mCustomScrollbar({ autoHideScrollbar: true });

        new MenuTip(menu);

        $.ajax({
            url: "data/menu.txt",
            success: function (text) {
                var data = mini.decode(text);
                menu.loadData(data);
            }

        });

        /*  // 监听右键事件，创建右键菜单
         $('#tabs').tabs({
             onContextMenu: function (e, title, index) {
                 e.preventDefault();
                 if (index > 0) {
                     $('#menu2').menu('show', {
                         left: e.pageX,
                         top: e.pageY
                     }).data("tabTitle", title);
                 }
             }
         });
        // 右键菜单click
         $("#menu2").menu({
             onClick: function (item) {
                 closeTab(this, item.name);
             }
         });


         function closeTab(menu, type) {
             var allTabs = $("#tabs").tabs('tabs');
             var allTabtitle = [];
             $.each(allTabs, function (i, n) {
                 var opt = $(n).panel('options');
                 if (opt.closable)
                     allTabtitle.push(opt.title);
             });
             var curTabTitle = $(menu).data("tabTitle");
             var curTabIndex = $("#tabs").tabs("getTabIndex", $("#tabs").tabs("getTab", curTabTitle));
             switch (type) {
                 case "1": // 刷新当前标签页
                     var panel = $("#tabs").tabs("getTab", curTabTitle).panel("refresh");
                     break;
                 case "2": // 关闭当前标签页
                     $("#tabs").tabs("close", curTabIndex);
                     return false;
                     break;
                 case "3": // 关闭全部标签页
                     for (var i = 0; i < allTabtitle.length; i++) {
                         $('#tabs').tabs('close', allTabtitle[i]);
                     }
                     break;
                 case "4": // 关闭其他标签页
                     for (var i = 0; i < allTabtitle.length; i++) {
                         if (curTabTitle != allTabtitle[i])
                             $('#tabs').tabs('close', allTabtitle[i]);
                     }
                     $('#tabs').tabs('select', curTabTitle);
                     break;
                 case "5": // 关闭右侧标签页
                     for (var i = curTabIndex; i < allTabtitle.length; i++) {
                         $('#tabs').tabs('close', allTabtitle[i]);
                     }
                     $('#tabs').tabs('select', curTabTitle);
                     break;
                 case "6": // 关闭左侧标签页
                     for (var i = 0; i < curTabIndex - 1; i++) {
                         $('#tabs').tabs('close', allTabtitle[i]);
                     }
                     $('#tabs').tabs('select', curTabTitle);
                     break;

             }

         }*/



        //toggle
        $("#toggle, .sidebar-toggle").click(function () {
            $('body').toggleClass('compact');
            mini.layout();
        });


        //dropdown
        $(".dropdown-toggle").click(function (event) {
            $(this).parent().addClass("open");
            return false;
        });

        $(document).click(function (event) {
            $(".dropdown").removeClass("open");
        });


    });

</script>


</body>
</html>

